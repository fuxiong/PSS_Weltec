@model PSS_Weltec.Models.Project

@{
    ViewBag.Title = "ProjectEditLoad";
    Layout = "~/Views/Shared/FrameShare.cshtml";
}


<div region="center" title="" border="false" style="padding: 0px 0px 2px 0px; overflow: hidden;">
    <div class="easyui-panel" title="" fit="true" border="true" style="overflow: hidden;">
        <div class="easyui-layout" fit="true">
            <div region="north" title="" border="false" style="height: 26px; overflow: hidden;">
                <div class="div_toolbar" style="float: left; height: 26px; width: 100%; border-bottom: 1px solid #99BBE8; padding: 1px;">
                    <a href="javascript:void(0);" class="easyui-linkbutton" id="Save" plain="true" icon="icon-save" onclick="Save();">Save</a>
                </div>
            </div>
            <div region="center" border="true" style="overflow: auto;">
                <form id="modelForm" method="post">
                    <fieldset style="padding: 10px; text-align: left;">
                        <legend><b>Project Details</b></legend>
                        <table style="width: 99%; margin: 10px auto;" border="1">
                            <tr style="height: 24px">
                                <td style="width: 10%; text-align: right;">
                                    <b>Project Title:&nbsp;&nbsp;&nbsp;&nbsp;</b>
                                </td>
                                <td style="width: 40%; text-align: left;" colspan="3">
                                    <input id="Proj_Title" name="Proj_Title" type="text" style="width: 95%;" />
                                    <input id="Proj_Trimester_Id" name="Proj_Trimester_Id" name="Proj_Title" hidden="hidden" value="@Model.Proj_Trimester_Id"/>
                                </td>
                            </tr>
                            <tr>
                                <td style="width: 10%; text-align: right;">
                                    <b>Staff Contact:&nbsp;&nbsp;&nbsp;&nbsp;</b>
                                </td>
                                <td style="width: 40%; text-align: left;">
                                    <input id="Proj_Staff_Contact" name="Proj_Staff_Contact" type="text" style="width: 95%;" />
                                </td>
                                <td style="width: 10%; text-align: right;" nowrap>
                                    <b>Client Contact:&nbsp;&nbsp;&nbsp;&nbsp;</b>
                                </td>
                                <td style="width: 40%; text-align: left;">
                                    <input id="Proj_Client_Contact" name="Proj_Client_Contact" type="text" style="width: 89%;" />
                                </td>
                            </tr>
                            <tr style="height: 24px">
                                <td style="width: 10%; text-align: right;">
                                    <b>Client Company:&nbsp;&nbsp;</b>
                                </td>
                                <td style="width: 40%; text-align: left;" colspan="3">
                                    <input id="Proj_Client_Company" name="Proj_Client_Company" type="text" style="width: 95%;" />
                                </td>
                            </tr>
                            <tr>
                                <td style="width: 10%; text-align: right;">
                                    <b>Valid Dates:&nbsp;&nbsp;&nbsp;&nbsp;</b>
                                </td>
                                <td style="width: 40%; text-align: left;">
                                    <input id="Proj_Valid_Dates" name="Proj_Valid_Dates" type="text" style="width: 95%;" />
                                </td>
                                <td style="width: 10%; text-align: right;" nowrap>
                                    <b># Students:&nbsp;&nbsp;&nbsp;&nbsp;</b>
                                </td>
                                <td style="width: 40%; text-align: left;">
                                    <input id="Proj_Students_Num" name="Proj_Students_Num" type="text" style="width: 20%;" />
                                    <b>&nbsp;&nbsp;&nbsp;&nbsp;Continuation?&nbsp;&nbsp;&nbsp;&nbsp;</b>
                                    @Html.DropDownList("Proj_Continuation", (IEnumerable<SelectListItem>)ViewData["list"], new { style = "width:50px;" })
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align: left;" colspan="4">
                                    <b>Short Description</b><span>(1-2 sentences):&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align: left;" colspan="4">
                                    <textarea id="Proj_Description" name="Proj_Description" style="width: 98%;" rows="8"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align: left;" colspan="4">
                                    <b>Major Skills Required</b><span>:&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align: left;" colspan="4">
                                    <textarea style="width: 98%;" id="Proj_Skills_Required" name="Proj_Skills_Required" rows="4"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align: left;" colspan="4">
                                    <b>Context</b><span>(describe environment and situation):&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align: left;" colspan="4">
                                    <textarea style="width: 98%;" id="Proj_Context" name="Proj_Context" rows="8"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align: left;" colspan="4">
                                    <b>Goals</b><span>(main achievements or deliverables required):&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align: left;" colspan="4">
                                    <textarea style="width: 98%;" id="Proj_Goals" name="Proj_Goals" rows="8"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align: left;" colspan="4">
                                    <b>Features</b><span>(design features and any other required content ):&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align: left;" colspan="4">
                                    <textarea style="width: 98%;" id="Proj_Features" name="Proj_Features" rows="8"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align: left;" colspan="4">
                                    <b>Challenges</b><span>(expected difficulties and risks ):&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align: left;" colspan="4">
                                    <textarea style="width: 98%;" id="Proj_Challenges" name="Proj_Challenges" rows="8"></textarea>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align: left;" colspan="4">
                                    <b>Further Opportunities</b><span>(for further development or extension):&nbsp;&nbsp;&nbsp;&nbsp;</span>
                                </td>
                            </tr>
                            <tr>
                                <td style="text-align: left;" colspan="4">
                                    <textarea style="width: 98%;" id="Proj_Opportunities" name="Proj_Opportunities" rows="8"></textarea>
                                </td>
                            </tr>
                        </table>
                    </fieldset>
                </form>
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    $(function () {
        EditLoad();
    })
    function EditLoad() {
        var modelId = "@Model.Proj_Id";
        if (modelId != null && modelId != 0 && modelId != "") {
            $("#modelForm input[name='Proj_Title']").val("@Model.Proj_Title");
            $("#modelForm input[name='Proj_Staff_Contact']").val("@Model.Proj_Staff_Contact");
            $("#modelForm input[name='Proj_Client_Contact']").val("@Model.Proj_Client_Contact");
            $("#modelForm input[name='Proj_Client_Company']").val("@Model.Proj_Client_Company");
            $("#modelForm input[name='Proj_Valid_Dates']").val("@Model.Proj_Valid_Dates");
            $("#Proj_Students_Num").val("@Model.Proj_Students_Num");
            $("#Proj_Continuation").val("@Model.Proj_Continuation");

            $("#Proj_Description").val(unescape("@Model.Description"));
            $("#Proj_Skills_Required").val(unescape("@Model.Skills_Required"));
            $("#Proj_Context").val(unescape("@Model.Context"));
            $("#Proj_Goals").val(unescape("@Model.Goals"));
            $("#Proj_Features").val(unescape("@Model.Features"));
            $("#Proj_Challenges").val(unescape("@Model.Challenges"));
            $("#Proj_Opportunities").val(unescape("@Model.Opportunities"));

            $("#modelForm input[name='Proj_Title']").focus();
        }
    }
    function Save() {
        var modelId = "@Model.Proj_Id";
        var sUrl = '/Project/ProjectSave/';
        if (modelId != null && modelId != 0 && modelId != "") {
            sUrl = '/Project/ProjectSave/?id=' + modelId;
        }
        $('#modelForm').form('submit', {
            url: sUrl,
            onSubmit: function () {
                return $('#modelForm').form('validate');
            },
            success: function (r) {
                var rVal = $.parseJSON(r);
                if (rVal.result) {
                    $.messager.alert('Success', 'Success to save!', 'success');
                    $('#Save').hide();
                } else {
                    $.messager.alert('Error', 'Fail:' + rVal.message, 'error');
                }
            }
        })
    }
</script>
